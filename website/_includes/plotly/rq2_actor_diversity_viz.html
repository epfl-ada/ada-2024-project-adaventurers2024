<div id="parallel-coords" style="width: 100%; height: 600px;"></div>
<script>
    // Load JSON data dynamically
    fetch('/assets/data/actor_diversity.json')
      .then(response => response.json())
      .then(data => {
        // Extract data for parallel coordinates plot
        const age_diversity = data.map(d => d.age_diversity);
        const gender_diversity = data.map(d => d.gender_diversity);
        const height_diversity = data.map(d => d.height_diversity);
        const ethnicity_diversity = data.map(d => d.ethnicity_diversity);
        const avg_rating = data.map(d => d.average_rating);
        const revenue = data.map(d => d.revenue);

        const dimensions = [
          { label: 'Age Diversity (std)', values: age_diversity },
          { label: 'Gender Diversity (entropy)', values: gender_diversity },
          { label: 'Height Diversity (std)', values: height_diversity },
          { label: 'Ethnicity Diversity (entropy)', values: ethnicity_diversity },
          { label: 'Average Rating', values: avg_rating },
          { label: 'Revenue', values: revenue }
        ];

        const trace = {
          type: 'parcoords',
          line: {
            color: avg_rating, // Color lines by average rating
            colorscale: 'RdBu'
          },
          dimensions: dimensions
        };

        const layout = {
          title: 'Movie-Level Diversity and Performance Metrics',
          width: 1200,
          height: 500
        };

        // Render the Plotly plot
        Plotly.newPlot('parallel-coords', [trace], layout);
      })
      .catch(error => {
        console.error('Error loading JSON data:', error);
      });
</script>
